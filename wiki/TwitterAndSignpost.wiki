#summary Real-life example of how to use Signpost with Twitter
#labels twitter,Featured,example

= Using Signpost with Twitter =
If you want to access Twitter's service API from your Java application, or if you are writing a Twitter API facade in Java and don't want to bother about the nitty gritty details of OAuth, then you have come to the right place: Signpost works flawlessly in conjunction with Twitter's server-side OAuth implementation.

You can get a consumer key and secret for your Twitter application [http://twitter.com/oauth_clients here].

= Example Code =
{{{
import java.io.BufferedReader;
import java.io.InputStreamReader;

import oauth.signpost.OAuthConsumer;
import oauth.signpost.OAuthProvider;
import oauth.signpost.impl.DefaultOAuthConsumer;
import oauth.signpost.impl.DefaultOAuthProvider;
import oauth.signpost.signature.SignatureMethod;

public class Main {

    public static void main(String[] args) throws Exception {

        OAuthConsumer consumer = new DefaultOAuthConsumer(
                // the consumer key of this app (replace this with yours)
                "iIlNngv1KdV6XzNYkoLA",
                // the consumer secret of this app (replace this with yours)
                "exQ94pBpLXFcyttvLoxU2nrktThrlsj580zjYzmoM",
                SignatureMethod.HMAC_SHA1);

        OAuthProvider provider = new DefaultOAuthProvider(consumer,
                "http://twitter.com/oauth/request_token",
                "http://twitter.com/oauth/access_token",
                "http://twitter.com/oauth/authorize");

        // we do not support callbacks, thus pass null
        String authUrl = provider.retrieveRequestToken(null);

        // bring the user to authUrl, e.g. open a web browser
        // ...         

        // user must have granted authorization at this point
        provider.retrieveAccessToken();

        // store consumer.getToken() and consumer.getTokenSecret()
        // ...
    }
}
}}}

Here is what you typically do step by step:

  # When your users want to access Twitter through your application for the first time, you should display some kind of notification which indicates that an authentication process is about to start
  # Call OAuthProvider.retrieveRequestToken() on the OAuthProvider
  # On method return, you have to send the user to the URL returned by it. The user now must grant your application access to Twitter - this step is out of the reach of your application, because it happens in the Web browser. However, if your application can receive callbacks via URLs, you can be informed about successful authorization by providing a callback URL to retrieveRequestToken().
  # Call OAuthProvider.retrieveAccessToken()
  # On method return, call OAuthConsumer.getToken() and OAuthConsumer.getTokenSecret(), associate them with the user who triggered the authorization procedure, and store them away safely.
  # Any OAuthConsumer configured with these values can now sign HTTP requests in order to access protected resources on Twitter on behalf of that user.

You can also [http://oauth-signpost.googlecode.com/files/OAuthTwitterTest.zip download this example code] as a Java/Eclipse project and go from there.